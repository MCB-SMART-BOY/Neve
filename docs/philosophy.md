# Neve 设计哲学与路线图

## 项目愿景

Neve 是一门为类 Unix 操作系统设计的纯函数式系统配置与包管理语言。目标是继承 Nix 的核心理念，同时用现代设计从零实现，**不兼容 nixpkgs**。

## 核心设计原则

### 1. 零二义性
每个语法构造都必须有且仅有一种解析方式。
- 记录用 `#{ }` 而非 `{ }`
- 闭包用 `fn(x) expr` 而非 `x -> expr`
- 注释用 `-- --`，不与任何操作符冲突

### 2. 语法统一
相似的概念使用相似的语法。

| 概念 | 语法 |
|------|------|
| 命名函数 | `fn name(x) expr` |
| 匿名函数 | `fn(x) expr` |
| 函数类型 | `A -> B` |
| match 分支 | `pattern -> expr` |

### 3. 不依赖缩进
所有结构都有显式的边界标记（`{ }`, `;`, `,`）。

### 4. 纯函数式
无副作用，无可变状态。相同输入永远产生相同输出。

### 5. 简洁优先
17 个关键字，足够表达所有概念。

### 6. Unix 哲学
小而专注，组合优于继承，文本是通用接口。

## 与 Nix 的区别

| Nix 问题 | Neve 方案 |
|----------|-----------|
| `{ }` 多义 | `#{ }` 记录，`{ }` 代码块 |
| `x: x+1` 闭包 | `fn(x) x+1` 明确 |
| `rec { }` 显式递归 | 自动检测，无需标记 |
| `with pkgs;` 隐式导入 | `import pkgs (*)` 显式 |
| `inherit x;` | `#{ x }` 简写 |

## 实现原则

- **纯 Rust 实现**: 不依赖任何 C/C++ 库
- **错误信息优先**: 精确位置 + 修复建议
- **渐进式实现**: 分阶段完成核心语言、包管理、系统配置、工具链

## 当前状态 (v0.3.0)

### 已完成 ✅

| 组件 | 描述 |
|------|------|
| neve-lexer | 词法分析器 (logos) |
| neve-parser | 递归下降解析器 + 错误恢复 |
| neve-typeck | HM 类型推导 + Trait 解析 |
| neve-eval | 树遍历解释器 + 惰性求值 |
| neve-std | 标准库 (9 个模块) |
| neve-derive | Derivation 模型 |
| neve-store | 内容寻址存储 |
| neve-builder | 沙箱构建器 (Linux) |
| neve-config | 系统配置框架 + 代际 |
| neve-fmt | 代码格式化器 |
| neve-lsp | 语言服务器 |
| neve-cli | 命令行界面 |

### 进行中 🔄

- 模块加载器完善
- Trait 关联类型
- LSP 增强（跳转定义、自动补全）
- 尾调用优化

### 未来 📋

- 宏系统
- Bootstrap 包集合
- 二进制缓存服务
- 高阶类型 (HKT)
- Neve OS

## 完成度评估

```
语言核心:     ████████████████████ 95%
工具链:       ████████████████░░░░ 80%
包管理:       ████████████░░░░░░░░ 60%
操作系统:     ████████░░░░░░░░░░░░ 40%
生态系统:     ████░░░░░░░░░░░░░░░░ 20%
```

## 命名由来

**Neve** 在多种语言中意为"雪"（意大利语、葡萄牙语等），与 Nix（拉丁语"雪"）有精神联系，暗示纯净、简洁的设计理念。

## 许可证

[MPL-2.0](../LICENSE)
